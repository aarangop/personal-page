import{s as at,e as b,a as U,w as J,b as w,i as L,g as S,h as g,d as N,t as K,f as Q,n as W,p as D,r as ot}from"../chunks/15.B-r9qISn.js";import{S as lt,i as it,d as A,v as rt,f as v,b as j,h as X,g as ct,t as Y,a as P,o as ut,j as ft,k as dt,c as p,m as ht,l as O,n as mt,s as pt}from"../chunks/index.BHkzuj50.js";import{b as $}from"../chunks/paths.qt3p15CT.js";import{I as tt}from"../chunks/Icon.DhXsKtF5.js";async function q(r,t,a){const{callbackUrl:d=window.location.href,redirect:c=!0}=t??{},i=r==="credentials",o=i||r==="email",m=$??"",_=`${`${m}/auth/${i?"callback":"signin"}/${r}`}?${new URLSearchParams(a)}`,y=await fetch(`${m}/auth/csrf`),{csrfToken:f}=await y.json(),e=await fetch(_,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Auth-Return-Redirect":"1"},body:new URLSearchParams({...t,csrfToken:f,callbackUrl:d})}),u=await e.clone().json();if(c||!o){window.location.href=u.url??d,u.url.includes("#")&&window.location.reload();return}return e}async function Z(r){const{callbackUrl:t=window.location.href}=r??{},a=$??"",d=await fetch(`${a}/auth/csrf`),{csrfToken:c}=await d.json(),o=(await(await fetch(`${a}/auth/signout`,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Auth-Return-Redirect":"1"},body:new URLSearchParams({csrfToken:c,callbackUrl:t})})).json()).url??t;window.location.href=o,o.includes("#")&&window.location.reload()}const k="src/routes/login/+page.svelte";function et(r){let t,a,d,c="Sign In with GitHub",i,h,o,m,n,_,y;o=new tt({props:{icon:"bi:github"},$$inline:!0});let f=r[3]&&st(r);const e={c:function(){t=b("div"),a=b("button"),d=b("span"),d.textContent=c,i=U(),h=b("span"),ft(o.$$.fragment),m=U(),f&&f.c(),this.h()},l:function(l){t=w(l,"DIV",{class:!0});var s=N(t);a=w(s,"BUTTON",{class:!0});var I=N(a);d=w(I,"SPAN",{"data-svelte-h":!0}),L(d)!=="svelte-1cqsa9"&&(d.textContent=c),i=S(I),h=w(I,"SPAN",{});var C=N(h);dt(o.$$.fragment,C),C.forEach(P),I.forEach(P),m=S(s),f&&f.l(s),s.forEach(P),this.h()},h:function(){g(d,k,21,3,748),g(h,k,22,3,786),v(a,"class","btn variant-filled"),g(a,k,20,2,653),v(t,"class","flex flex-col space-y-2"),g(t,k,19,1,613)},m:function(l,s){j(l,t,s),p(t,a),p(a,d),p(a,i),p(a,h),ht(o,h,null),p(t,m),f&&f.m(t,null),n=!0,_||(y=O(a,"click",r[5],!1,!1,!1,!1),_=!0)},p:function(l,s){l[3]&&f.p(l,s)},i:function(l){n||(Y(o.$$.fragment,l),n=!0)},o:function(l){X(o.$$.fragment,l),n=!1},d:function(l){l&&P(t),mt(o),f&&f.d(),_=!1,y()}};return A("SvelteRegisterBlock",{block:e,id:et.name,type:"else",source:"(16:0) {:else}",ctx:r}),e}function nt(r){var f;let t,a,d,c=((f=r[0].session.user)==null?void 0:f.name)+"",i,h,o,m="Log Out",n,_;const y={c:function(){t=b("div"),a=b("div"),d=K("You're currently logged in as "),i=K(c),h=U(),o=b("button"),o.textContent=m,this.h()},l:function(u){t=w(u,"DIV",{class:!0});var l=N(t);a=w(l,"DIV",{});var s=N(a);d=Q(s,"You're currently logged in as "),i=Q(s,c),s.forEach(P),h=S(l),o=w(l,"BUTTON",{class:!0,"data-svelte-h":!0}),L(o)!=="svelte-1g06cml"&&(o.textContent=m),l.forEach(P),this.h()},h:function(){g(a,k,15,2,448),v(o,"class","btn variant-filled"),g(o,k,16,2,517),v(t,"class","flex flex-col space-y-2"),g(t,k,14,1,408)},m:function(u,l){j(u,t,l),p(t,a),p(a,d),p(a,i),p(t,h),p(t,o),n||(_=O(o,"click",r[4],!1,!1,!1,!1),n=!0)},p:function(u,l){var s;l&1&&c!==(c=((s=u[0].session.user)==null?void 0:s.name)+"")&&pt(i,c)},i:W,o:W,d:function(u){u&&P(t),n=!1,_()}};return A("SvelteRegisterBlock",{block:y,id:nt.name,type:"if",source:"(11:0) {#if data.session}",ctx:r}),y}function st(r){let t,a,d,c,i="or",h,o,m,n,_,y="Username",f,e,u,l,s="Password",I,C,H,T,F="Log In",V,G;const M={c:function(){t=b("div"),a=b("hr"),d=U(),c=b("span"),c.textContent=i,h=U(),o=b("hr"),m=U(),n=b("form"),_=b("label"),_.textContent=y,f=U(),e=b("input"),u=U(),l=b("label"),l.textContent=s,I=U(),C=b("input"),H=U(),T=b("button"),T.textContent=F,this.h()},l:function(x){t=w(x,"DIV",{class:!0});var R=N(t);a=w(R,"HR",{class:!0}),d=S(R),c=w(R,"SPAN",{"data-svelte-h":!0}),L(c)!=="svelte-17wkmf7"&&(c.textContent=i),h=S(R),o=w(R,"HR",{class:!0}),R.forEach(P),m=S(x),n=w(x,"FORM",{class:!0});var E=N(n);_=w(E,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),L(_)!=="svelte-1dmp8vp"&&(_.textContent=y),f=S(E),e=w(E,"INPUT",{class:!0,type:!0,name:!0}),u=S(E),l=w(E,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),L(l)!=="svelte-m1esth"&&(l.textContent=s),I=S(E),C=w(E,"INPUT",{class:!0,type:!0,name:!0}),H=S(E),T=w(E,"BUTTON",{class:!0,"data-svelte-h":!0}),L(T)!=="svelte-izxejo"&&(T.textContent=F),E.forEach(P),this.h()},h:function(){v(a,"class","flex-1"),g(a,k,28,4,948),g(c,k,29,4,974),v(o,"class","flex-1"),g(o,k,30,4,994),v(t,"class","flex flex-row justify-between items-center space-x-2"),g(t,k,27,3,877),v(_,"class","label"),v(_,"for","username"),g(_,k,33,4,1071),v(e,"class","input mb-2"),v(e,"type","text"),v(e,"name","username"),g(e,k,34,4,1128),v(l,"class","label"),v(l,"for","password"),g(l,k,35,4,1211),v(C,"class","input mb-2"),v(C,"type","password"),v(C,"name","password"),g(C,k,36,4,1268),v(T,"class","btn variant-filled"),g(T,k,37,4,1355),v(n,"class","card flex flex-col p-4"),g(n,k,32,3,1029)},m:function(x,R){j(x,t,R),p(t,a),p(t,d),p(t,c),p(t,h),p(t,o),j(x,m,R),j(x,n,R),p(n,_),p(n,f),p(n,e),D(e,r[1]),p(n,u),p(n,l),p(n,I),p(n,C),D(C,r[2]),p(n,H),p(n,T),V||(G=[O(e,"input",r[6]),O(C,"input",r[7]),O(T,"click",r[8],!1,!1,!1,!1)],V=!0)},p:function(x,R){R&2&&e.value!==x[1]&&D(e,x[1]),R&4&&C.value!==x[2]&&D(C,x[2])},d:function(x){x&&(P(t),P(m),P(n)),V=!1,ot(G)}};return A("SvelteRegisterBlock",{block:M,id:st.name,type:"if",source:"(24:2) {#if credentialsProvider}",ctx:r}),M}function z(r){let t,a="Log In",d,c,i,h,o;const m=[nt,et],n=[];function _(f,e){return f[0].session?0:1}c=_(r),i=n[c]=m[c](r);const y={c:function(){t=b("h2"),t.textContent=a,d=U(),i.c(),h=J(),this.h()},l:function(e){t=w(e,"H2",{class:!0,"data-svelte-h":!0}),L(t)!=="svelte-1q515s4"&&(t.textContent=a),d=S(e),i.l(e),h=J(),this.h()},h:function(){v(t,"class","h2 mb-4"),g(t,k,12,0,356)},m:function(e,u){j(e,t,u),j(e,d,u),n[c].m(e,u),j(e,h,u),o=!0},p:function(e,[u]){let l=c;c=_(e),c===l?n[c].p(e,u):(ut(),X(n[l],1,1,()=>{n[l]=null}),ct(),i=n[c],i?i.p(e,u):(i=n[c]=m[c](e),i.c()),Y(i,1),i.m(h.parentNode,h))},i:function(e){o||(Y(i),o=!0)},o:function(e){X(i),o=!1},d:function(e){e&&(P(t),P(d),P(h)),n[c].d(e)}};return A("SvelteRegisterBlock",{block:y,id:z.name,type:"component",source:"",ctx:r}),y}function _t(r,t,a){let{$$slots:d={},$$scope:c}=t;rt("Page",d,[]);let{data:i}=t,h=i.providers.filter(s=>s.id==="github"),o=i.providers.filter(s=>s.id==="credentials"),m="",n="";r.$$.on_mount.push(function(){i===void 0&&!("data"in t||r.$$.bound[r.$$.props.data])&&console.warn("<Page> was created without expected prop 'data'")});const _=["data"];Object.keys(t).forEach(s=>{!~_.indexOf(s)&&s.slice(0,2)!=="$$"&&s!=="slot"&&console.warn(`<Page> was created with unknown prop '${s}'`)});const y=()=>Z(),f=()=>q("github",{callbackUrl:"/"});function e(){m=this.value,a(1,m)}function u(){n=this.value,a(2,n)}const l=()=>q("credentials",{username:m,password:n,callbackUrl:"/"});return r.$$set=s=>{"data"in s&&a(0,i=s.data)},r.$capture_state=()=>({signIn:q,signOut:Z,Icon:tt,data:i,githubProvider:h,credentialsProvider:o,username:m,password:n}),r.$inject_state=s=>{"data"in s&&a(0,i=s.data),"githubProvider"in s&&(h=s.githubProvider),"credentialsProvider"in s&&a(3,o=s.credentialsProvider),"username"in s&&a(1,m=s.username),"password"in s&&a(2,n=s.password)},t&&"$$inject"in t&&r.$inject_state(t.$$inject),[i,m,n,o,y,f,e,u,l]}class kt extends lt{constructor(t){super(t),it(this,t,_t,z,at,{data:0}),A("SvelteRegisterComponent",{component:this,tagName:"Page",options:t,id:z.name})}get data(){throw new Error("<Page>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(t){throw new Error("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{kt as component};
